<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>College Attendance Portal</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background: #f4f6f8;
    }
    header {
      background: #2c3e50;
      color: white;
      padding: 15px;
      text-align: center;
    }
    main {
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    .card {
      background: white;
      padding: 20px;
      margin: 15px 0;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    input, select, button {
      padding: 10px;
      margin: 5px 0;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      background: #2c3e50;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #34495e;
    }
    .hidden {
      display: none;
    }
    h2 {
      color: #2c3e50;
    }
  </style>
</head>
<body>
  <header>
    <h1>College Attendance Portal</h1>
  </header>

  <main>
    <!-- Login -->
    <section class="card" id="login-section">
      <h2>Login</h2>
      <label>Enter Roll Number:</label>
      <input type="text" id="roll-number" placeholder="e.g., 22CS101">
      <button onclick="login()">Login</button>
    </section>

    <!-- Attendance Section -->
    <section class="card hidden" id="attendance-section">
      <h2>Mark Attendance</h2>
      <p id="student-id"></p>
      <label>Select Subject:</label>
      <select id="subject">
        <option value="OOA&D">OOA&D</option>
        <option value="CN">CN</option>
        <option value="IAI">IAI</option>
        <option value="FSD">FSD</option>
      </select>
      <label>Status:</label>
      <select id="status">
        <option value="Present">Present</option>
        <option value="Absent">Absent</option>
      </select>
      <button onclick="markAttendance()">Submit</button>
    </section>

    <!-- Records -->
    <section class="card hidden" id="records-section">
      <h2>Attendance Records</h2>
      <div id="records-list"></div>
      <button onclick="logout()">Logout</button>
    </section>
  </main>

  <script>
    let currentStudent = null;
    let attendanceData = {}; // Stores attendance {rollNumber: [{subject, status}]}

    function login() {
      const roll = document.getElementById("roll-number").value.trim();
      if (!roll) {
        alert("Please enter Roll Number!");
        return;
      }
      currentStudent = roll;
      if (!attendanceData[roll]) {
        attendanceData[roll] = [];
      }
      document.getElementById("student-id").innerText = "Logged in as: " + roll;
      document.getElementById("login-section").classList.add("hidden");
      document.getElementById("attendance-section").classList.remove("hidden");
      document.getElementById("records-section").classList.remove("hidden");
      showRecords();
    }

    function markAttendance() {
      const subject = document.getElementById("subject").value;
      const status = document.getElementById("status").value;
      attendanceData[currentStudent].push({subject, status});
      showRecords();
      alert("Attendance marked successfully!");
    }

    function showRecords() {
      const list = document.getElementById("records-list");
      const records = attendanceData[currentStudent];
      if (records.length === 0) {
        list.innerHTML = "<p>No attendance marked yet.</p>";
        return;
      }

      // Calculate percentage
      let present = records.filter(r => r.status === "Present").length;
      let total = records.length;
      let percentage = ((present / total) * 100).toFixed(2);

      let html = `<p><strong>Total Classes:</strong> ${total}<br>
                  <strong>Present:</strong> ${present}<br>
                  <strong>Attendance %:</strong> ${percentage}%</p>`;
      html += "<ul>";
      records.forEach((rec, i) => {
        html += <li>${i+1}. ${rec.subject} - ${rec.status}</li>;
      });
      html += "</ul>";
      list.innerHTML = html;
    }

    function logout() {
      currentStudent = null;
      document.getElementById("roll-number").value = "";
      document.getElementById("login-section").classList.remove("hidden");
      document.getElementById("attendance-section").classList.add("hidden");
      document.getElementById("records-section").classList.add("hidden");
    }
  </script>
</body>
</html>